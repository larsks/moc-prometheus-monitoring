---
entryPoints:
  http:
    address: :80
  https:
    address: :443

certificatesResolvers:
  letsEncrypt:
    acme:
      email: lars@redhat.com
      storage: /data/traefik/acme.json
      httpChallenge:
        entryPoint: http

providers:
  docker:
    exposedByDefault: false

metrics:
  prometheus: true

api:
  dashboard: true
  insecure: true

http:
  routers:
    http_catchall:
      entryPoints:
        - http
      middlewares:
        - https_redirect
      rule: "HostRegexp(`{any:.+}`)"
      service: noop

  services:
    # noop service, the URL will be never called
    noop:
      loadBalancer:
        servers:
          - url: http://192.168.0.1:1337

  middlewares:
    https_redirect:
      redirectScheme:
        scheme: https
        permanent: true
